---
title: "R Notebook"
output: html_notebook
editor_options: 
  chunk_output_type: inline
---


```{r}
library(rayshader)
library(raster)
library(magrittr)
```


```{r}
original_tif <- raster("../data/N37E126.hgt")
resampled <- aggregate(original_tif, 4)  # downsampling

# elevation matrix
elmat = matrix(extract(resampled, extent(resampled)),
               nrow=nrow(resampled),
               ncol=ncol(resampled))

elmat %>%
  sphere_shade(texture = "imhof2") %>%
  add_water(detect_water(elmat)) %>%
  add_shadow(lamb_shade(elmat)) %>%
  #add_shadow(ambient_shade(elmat, multicore = TRUE)) %>%
  plot_3d(elmat, zscale=40, soliddepth=-100, 
          windowsize = c(1000, 1000), 
          fov=60, zoom=1.4, 
          water=TRUE, watercolor="#0b3849", waterdepth = 0.1, wateralpha=0.7)
```

